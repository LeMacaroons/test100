You are troubleshooting a performance and backlog issue in a call recording processing pipeline running entirely on Google Cloud.
System Overview
Call recording (SIP) application produces audio files.
Recordings are processed using FFmpeg.
A custom, in-house Node.js service (“smp”):
Controls concurrency (number of files processed at a time)
Moves files between directories
Transfers processed files to long-term storage
All workloads run on RHEL 8 VMs in Google Cloud.
VM type: n1-standard-16
Environment is PCI-compliant, so no third-party agents/tools can be installed.
Storage Architecture
NFS v3 mount is used as transitional/intermediate storage during processing.
Files are later moved to Google Cloud Storage buckets for long-term retention.
Observed Issues
The smp service intermittently slows down or “chokes,” resulting in a growing backlog of unprocessed recordings.
During high traffic periods, an API health-check endpoint (polled every 30 seconds by a utility server) intermittently fails.
Failures correlate with periods of high recording volume and processing backlog.
Monitoring & Observability Constraints
Google Cloud Monitoring dashboards are available.
sysstat (sar, iostat, etc.) is installed and collects metrics every 5 minutes.
No additional monitoring, profiling, or tracing tools can be installed due to PCI restrictions.
Goal
Describe a structured, step-by-step troubleshooting approach to identify the root cause of the backlog and service degradation.
Key Areas to Address
CPU, memory, disk I/O, and network bottlenecks
FFmpeg process behavior and resource usage
Node.js event loop saturation or concurrency limits
NFS v3 performance characteristics and contention
GCS upload behavior and potential backpressure
API health check failures as a potential early signal
How to correlate Google Cloud Monitoring metrics with sysstat data
What specific metrics, logs, and system indicators to prioritize given the tooling constraints
Assume no code changes or new tools initially — focus on diagnosis using existing telemetry and system data.
